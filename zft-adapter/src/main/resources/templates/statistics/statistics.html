<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <div th:replace="~{common/common::cjbar}"/>
    <title>统计</title>
</head>
<body style="background-color: rgb(225,228,232);">
<div th:replace="~{common/common::headbar}"/>
<div class="statistics" id="statistics">
    <div class="left">
        <div class="top">
            <p>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" style="color:rgb(252,196,37);" class="bi bi-cash-coin svg-text" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"/>
                    <path d="M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z"/>
                    <path d="M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z"/>
                    <path d="M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z"/>
                </svg>
                营收统计
            </p>
        </div>
        <div class="info">
            <div class="text">
                请选择需要统计的时间范围：
            </div>
            <div style="float: left;margin-right: 15px;">
                <div class="layui-inline">
                    <div class="layui-inline" id="test1">
                        <div class="layui-input-inline float-left" style="width: 100px;">
                            <input type="text" autocomplete="off" id="test-startDate-1" class="layui-input" style="border: 1px rgb(206,212,218) solid" readonly placeholder="开始日期">
                        </div>
                        <div class="layui-form-mid float-left" style="margin: 0 auto;">-</div>
                        <div class="layui-input-inline float-left" style="width: 100px;">
                            <input type="text" autocomplete="off" id="test-endDate-1"  class="layui-input" style="border: 1px rgb(206,212,218) solid" readonly placeholder="结束日期">
                        </div>
                    </div>
                </div>
            </div>
            <div style="float: right;">
                <button type="button" class="btn btn-outline-primary" v-on:click="">查询</button>
            </div>
            <div class="revenue" ref="revenue"></div>
            <div class="text">
                请选择需要统计的时间范围：
            </div>
            <div class="form-group float-left">
                <select class="form-control">
                    <option value="近一周">近一周</option>
                    <option value="近一月">近一月</option>
                    <option value="近三月">近三月</option>
                    <option value="近半年">近半年</option>
                    <option value="近一年">近一年</option>
                    <option value="近三年">近三年</option>
                </select>
            </div>
            <div style="float: right;">
                <button type="button" class="btn btn-outline-primary" v-on:click="">查询</button>
            </div>
            <div class="revenue-line" ref="revenueLine"></div>
        </div>
    </div>
    <div class="middle">
        <div class="top">
            <p>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" style="color: rgb(255,101,135)" class="bi bi-list-stars svg-text" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5z"/>
                    <path d="M2.242 2.194a.27.27 0 0 1 .516 0l.162.53c.035.115.14.194.258.194h.551c.259 0 .37.333.164.493l-.468.363a.277.277 0 0 0-.094.3l.173.569c.078.256-.213.462-.423.3l-.417-.324a.267.267 0 0 0-.328 0l-.417.323c-.21.163-.5-.043-.423-.299l.173-.57a.277.277 0 0 0-.094-.299l-.468-.363c-.206-.16-.095-.493.164-.493h.55a.271.271 0 0 0 .259-.194l.162-.53zm0 4a.27.27 0 0 1 .516 0l.162.53c.035.115.14.194.258.194h.551c.259 0 .37.333.164.493l-.468.363a.277.277 0 0 0-.094.3l.173.569c.078.255-.213.462-.423.3l-.417-.324a.267.267 0 0 0-.328 0l-.417.323c-.21.163-.5-.043-.423-.299l.173-.57a.277.277 0 0 0-.094-.299l-.468-.363c-.206-.16-.095-.493.164-.493h.55a.271.271 0 0 0 .259-.194l.162-.53zm0 4a.27.27 0 0 1 .516 0l.162.53c.035.115.14.194.258.194h.551c.259 0 .37.333.164.493l-.468.363a.277.277 0 0 0-.094.3l.173.569c.078.255-.213.462-.423.3l-.417-.324a.267.267 0 0 0-.328 0l-.417.323c-.21.163-.5-.043-.423-.299l.173-.57a.277.277 0 0 0-.094-.299l-.468-.363c-.206-.16-.095-.493.164-.493h.55a.271.271 0 0 0 .259-.194l.162-.53z"/>
                </svg>
                销售排行统计
            </p>
        </div>
        <div class="info">
            <div class="text">
                请选择需要统计的时间范围：
            </div>
            <div style="float: left;margin-right: 15px;">
                <div class="layui-inline">
                    <div class="layui-inline" id="test2">
                        <div class="layui-input-inline float-left" style="width: 100px;">
                            <input type="text" autocomplete="off" id="test-startDate-2"  class="layui-input" style="border: 1px rgb(206,212,218) solid" readonly placeholder="开始日期">
                        </div>
                        <div class="layui-form-mid float-left" style="margin: 0 auto;">-</div>
                        <div class="layui-input-inline float-left" style="width: 100px;">
                            <input type="text" autocomplete="off" id="test-endDate-2"  class="layui-input" style="border: 1px rgb(206,212,218) solid" readonly placeholder="结束日期">
                        </div>
                    </div>
                </div>
            </div>
            <div style="float: right;">
                <button type="button" class="btn btn-outline-primary" v-on:click="">查询</button>
            </div>
            <div class="moneyRate" ref="moneyRate"></div>
            <div class="numRate" ref="numRate"></div>
        </div>
    </div>
    <div class="right">
        <div class="top">
            <p>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" style="color: rgb(13,110,253)" class="bi bi-stack svg-text" viewBox="0 0 16 16">
                    <path d="m14.12 10.163 1.715.858c.22.11.22.424 0 .534L8.267 15.34a.598.598 0 0 1-.534 0L.165 11.555a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.66zM7.733.063a.598.598 0 0 1 .534 0l7.568 3.784a.3.3 0 0 1 0 .535L8.267 8.165a.598.598 0 0 1-.534 0L.165 4.382a.299.299 0 0 1 0-.535L7.733.063z"/>
                    <path d="m14.12 6.576 1.715.858c.22.11.22.424 0 .534l-7.568 3.784a.598.598 0 0 1-.534 0L.165 7.968a.299.299 0 0 1 0-.534l1.716-.858 5.317 2.659c.505.252 1.1.252 1.604 0l5.317-2.659z"/>
                </svg>
                进销存统计
            </p>
        </div>
        <div class="info">
            <div class="text">
                请选择需要统计的时间范围：
            </div>
            <div style="float: left;margin-right: 15px;">
                <div class="layui-inline">
                    <div class="layui-inline" id="test3">
                        <div class="layui-input-inline float-left" style="width: 100px;">
                            <input type="text" autocomplete="off" id="test-startDate-3"  class="layui-input" style="border: 1px rgb(206,212,218) solid" readonly placeholder="开始日期">
                        </div>
                        <div class="layui-form-mid float-left" style="margin: 0 auto;">-</div>
                        <div class="layui-input-inline float-left" style="width: 100px;">
                            <input type="text" autocomplete="off" id="test-endDate-3"  class="layui-input" style="border: 1px rgb(206,212,218) solid" readonly placeholder="结束日期">
                        </div>
                    </div>
                </div>
            </div>
            <div style="float: right;margin-bottom: 10px;">
                <button type="button" class="btn btn-outline-primary" v-on:click="">查询</button>
            </div>
            <div class="info-info">
                <table class="table table-striped" style="width: 100%;font-size: 15px;text-align: center;">
                    <thead>
                    <tr>
                        <td scope="col" width="20%">商品名</td>
                        <td scope="col" width="20%">规格</td>
                        <td scope="col" width="15%">期初数量</td>
                        <td scope="col" width="15%">入库数量</td>
                        <td scope="col" width="15%">出库数量</td>
                        <td scope="col" width="15%">期末数量</td>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    <tr>
                        <td>感冒灵胶囊</td>
                        <td>10袋/盒</td>
                        <td>0盒0袋</td>
                        <td>14盒3袋</td>
                        <td>8盒4袋</td>
                        <td>5盒9袋</td>
                    </tr>
                    </tbody>
                </table>
                <p style="display: none" class="no-data">暂无数据</p>
            </div>
        </div>
        <div class="bottom">
            <div class="float-left">
                <nav aria-label="Page navigation example" class="float-left" style="margin-right: 30px">
                    <ul class="pagination">
                        <li :class="1 > 1 ? 'page-item' : 'page-item disabled'"><a class="page-link" v-on:click="previousPage">上一页</a></li>
                        <li class="page-item">
                            <div class="form-group" style="float: left;width: 70px;">
                                <input type="number" v-on:blur="" class="form-control">
                            </div>
                        </li>
                        <li :class="1 ? 'page-item' : 'page-item disabled'"><a class="page-link" v-on:click="nextPage">下一页</a></li>
                    </ul>
                </nav>
                <span class="float-left" style="font-size: 16px;position: relative;top:7px;margin-right: 30px">共1页</span>
                <div class="btn-group float-left">
                    <button type="button" class="btn btn-outline-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                        15条/页
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" v-on:click="setPageSize(15)">15条/页</a>
                        <a class="dropdown-item" v-on:click="setPageSize(30)">30条/页</a>
                        <a class="dropdown-item" v-on:click="setPageSize(50)">50条/页</a>
                    </div>
                </div>
            </div>
            <div class="float-right">
                <p>共  条盘点单</p>
            </div>
        </div>
    </div>
</div>

<script>
    let vm = new Vue({
        el: "#statistics",
        data: {

        },
        methods: {

        },
        computed: {

        },
        mounted(){
            let that = this;
            layui.use('laydate', function () {
                var laydate = layui.laydate;
                //日期范围
                laydate.render({
                    elem: '#test1',
                    //设置开始日期、日期日期的 input 选择器
                    //数组格式为 2.6.6 开始新增，之前版本直接配置 true 或任意分割字符即可
                    range: ['#test-startDate-1', '#test-endDate-1'],
                    done: function (value) {
                        let dataStr = value.toString().split(" - ");
                    }
                });
                laydate.render({
                    elem: '#test2',
                    //设置开始日期、日期日期的 input 选择器
                    //数组格式为 2.6.6 开始新增，之前版本直接配置 true 或任意分割字符即可
                    range: ['#test-startDate-2', '#test-endDate-2'],
                    done: function (value) {
                        let dataStr = value.toString().split(" - ");
                    }
                });
                laydate.render({
                    elem: '#test3',
                    //设置开始日期、日期日期的 input 选择器
                    //数组格式为 2.6.6 开始新增，之前版本直接配置 true 或任意分割字符即可
                    range: ['#test-startDate-3', '#test-endDate-3'],
                    done: function (value) {
                        let dataStr = value.toString().split(" - ");
                    }
                });
            });
            // 营收统计
            let revenue = echarts.init(this.$refs.revenue, null, null);
            let option1 = {
                title: {
                    text: '成都大学诊所营收收入',
                    subtext: '¥2300',
                    left: 'center'
                },
                tooltip: {
                    trigger: 'item'
                },
                legend: {
                    orient: 'vertical',
                    left: 'left'
                },
                series: [
                    {
                        name: '营收统计',
                        type: 'pie',
                        radius: '50%',
                        color: ['rgb(40,167,69)','rgb(255,193,7)','rgb(0,123,255)'],
                        data: [
                            { value: 1000, name: '微信收入' },
                            { value: 750, name: '现金收入' },
                            { value: 550, name: '支付宝收入' }
                        ],
                        emphasis: {
                            itemStyle: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }
                ]
            };
            option1 && revenue.setOption(option1);

            // 每日营收对比
            let revenueLine = echarts.init(this.$refs.revenueLine, null, null);
            let option2 = {
                xAxis: {
                    type: 'category',
                    data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日']
                },
                yAxis: {
                    type: 'value',
                },
                series: [
                    {
                        data: [150, 230, 224, 218, 135, 5000, 260],
                        type: 'line',
                        smooth: true
                    }
                ]
            };
            option2 && revenueLine.setOption(option2);

            // 销售金额排行榜
            let moneyRate = echarts.init(this.$refs.moneyRate, null, null);
            let option3 = {
                title: {
                    text: '药品销售金额排行（前10位）（单位：元）'
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                legend: {},
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value',
                    boundaryGap: [0, 0.01]
                },
                yAxis: {
                    type: 'category',
                    data: ['感冒灵胶囊', '布洛芬胶囊', '健胃消食片', '感冒灵胶囊', '布洛芬胶囊', '健胃消食片','感冒灵胶囊', '布洛芬胶囊', '健胃消食片','感冒灵胶囊']
                },
                color: ['rgb(255,193,7)'],
                series: [
                    {
                        type: 'bar',
                        data: [1356,2357,6432,10234,18203, 23489, 29034, 104970, 131744, 630230]
                    },
                ]
            };
            option3 && moneyRate.setOption(option3);

            // 销售量排行榜
            let numRate = echarts.init(this.$refs.numRate, null, null);
            let option4 = {
                title: {
                    text: '药品销售量排行（前10位）'
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                legend: {},
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value',
                    boundaryGap: [0, 0.01]
                },
                yAxis: {
                    type: 'category',
                    data: ['感冒灵胶囊', '布洛芬胶囊', '健胃消食片', '感冒灵胶囊', '布洛芬胶囊', '健胃消食片','感冒灵胶囊', '布洛芬胶囊', '健胃消食片','感冒灵胶囊']
                },
                series: [
                    {
                        type: 'bar',
                        data: [1356.00,2357.00,6432.60,10234.70,18203.90, 23489.20, 29034.10, 34970.00, 113174.21, 163023.32]
                    },
                ]
            };
            option4 && numRate.setOption(option4);
        },
    });
</script>
</body>
</html>

